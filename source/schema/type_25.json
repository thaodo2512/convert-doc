{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Redfish Parallel Resource PDR Schema (DSP0248 1.3.0, Clause 28.29)",
  "type": "object",
  "additionalProperties": false,
  "binaryOrder": [
    "ResourceID",
    "ResourceFlags",
    "ContainingResourceID",
    "AdditionalResourceIDCount",
    "ProposedContainingResourceLengthBytes",
    "ProposedContainingResourceName",
    "SubURILengthBytes",
    "SubURI"
  ],
  "properties": {
    "pdrHeader": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "recordHandle": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "integer",
              "minimum": 0,
              "maximum": 4294967295
            }
          ],
          "binaryFormat": "I",
          "description": "uint32; opaque handle (TBD or auto-generated)"
        },
        "PDRHeaderVersion": {
          "type": "integer",
          "const": 1,
          "binaryFormat": "B",
          "description": "uint8; must be 1"
        },
        "PDRType": {
          "type": "integer",
          "const": 25,
          "binaryFormat": "B",
          "description": "uint8; Redfish Parallel Resource PDR = 25"
        },
        "recordChangeNumber": {
          "type": "integer",
          "minimum": 0,
          "maximum": 65535,
          "default": 0,
          "binaryFormat": "H",
          "description": "uint16; incremented on changes (default 0)"
        },
        "dataLength": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "integer",
              "minimum": 0,
              "maximum": 65535
            }
          ],
          "binaryFormat": "H",
          "description": "uint16; calculated data length (TBD)"
        }
      },
      "required": [
        "recordHandle",
        "PDRHeaderVersion",
        "PDRType",
        "recordChangeNumber",
        "dataLength"
      ]
    },
    "ResourceID": {
      "type": "integer",
      "minimum": 0,
      "maximum": 4294967295,
      "binaryFormat": "I",
      "description": "uint32; The primary ResourceID among the resources described by this PDR. All ResourceIDs across all Redfish Resource PDRs presented by an RDE Device shall be unique to that device."
    },
    "ResourceFlags": {
      "type": "integer",
      "minimum": 0,
      "maximum": 255,
      "binaryFormat": "B",
      "description": "bitfield8: [7:0] - reserved for future use"
    },
    "ContainingResourceID": {
      "type": "integer",
      "minimum": 0,
      "maximum": 4294967295,
      "binaryFormat": "I",
      "description": "uint32; An opaque number that references a Redfish Resource PDR in the hierarchy of containment. Special: 0x00000000 = EXTERNAL, 0xFFFFFFFF reserved"
    },
    "AdditionalResourceIDCount": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "binaryFormat": "H",
      "description": "uint16; Number NA of additional resourceIDs, each of which represents a separate instance of a Redfish resource that shares all the same schema data with the primary resourceID"
    },
    "additionalResources": {
      "type": "array",
      "minItems": 0,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "binaryOrder": [
          "AdditionalResourceID",
          "AdditionalContainingResourceID"
        ],
        "properties": {
          "AdditionalResourceID": {
            "type": "integer",
            "minimum": 0,
            "maximum": 4294967295,
            "binaryFormat": "I",
            "description": "uint32; The resourceID for another resource instance that shares all the same schema data detailed in this PDR with the primary resource instance. All ResourceIDs across all Redfish Resource PDRs presented by an RDE Device shall be unique to that device."
          },
          "AdditionalContainingResourceID": {
            "type": "integer",
            "minimum": 0,
            "maximum": 4294967295,
            "binaryFormat": "I",
            "description": "uint32; An opaque number that references a Redfish Resource PDR in the hierarchy of containment. Special: 0x00000000 = EXTERNAL, 0xFFFFFFFF reserved"
          }
        },
        "required": [
          "AdditionalResourceID",
          "AdditionalContainingResourceID"
        ]
      },
      "description": "Array of additional resource pairs, length = AdditionalResourceIDCount"
    },
    "ProposedContainingResourceLengthBytes": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "binaryFormat": "H",
      "description": "uint16; Length in bytes of the proposed parent resource that the resource this PDR represents should be subordinate to. Shall be 1 if ContainingResourceID is not EXTERNAL"
    },
    "ProposedContainingResourceName": {
      "type": "string",
      "binaryFormat": "variable",
      "description": "strUTF-8; Name of the schema for the proposed parent resource to which this PDR’s primary resource (and any additional resources) should be subordinate. Shall be a null byte if ContainingResourceID is not EXTERNAL. The format and usage of this field is defined in DSP0218."
    },
    "SubURILengthBytes": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "binaryFormat": "H",
      "description": "uint16; Length in bytes of the SubURI path fragment (including the null terminator) for the primary resource"
    },
    "SubURI": {
      "type": "string",
      "binaryFormat": "variable",
      "description": "strUTF-8; Null-terminated SubURI path fragment corresponding to the primary resource’s portion of the canonical OpenAPI pathname for this resource. Shall neither begin nor end with a slash (‘/’) character, except as defined for settings resources. Shall be a null byte if ContainingResourceID is EXTERNAL, except as defined for settings resources."
    }
  },
  "required": [
    "pdrHeader",
    "ResourceID",
    "ResourceFlags",
    "ContainingResourceID",
    "AdditionalResourceIDCount",
    "additionalResources",
    "ProposedContainingResourceLengthBytes",
    "ProposedContainingResourceName",
    "SubURILengthBytes",
    "SubURI"
  ]
}
