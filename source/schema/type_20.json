{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "FRU Record Set PDR (DSP0248 Type 20)",
  "description": "Per DSP0248 v1.3.0 Clause 28.22 and DSP0240 v1.2.0 Section 2.5",
  "type": "object",
  "additionalProperties": false,
  "binaryOrder": [
    "pdrHeader",
    "pldmTerminusHandle",
    "fruRecordSetIdentifier",
    "entityType",
    "entityInstanceNumber",
    "containerId"
  ],
  "x-c-struct-packing": 1,
  "properties": {
    "pdrHeader": {
      "type": "object",
      "description": "Common PDR Header (DSP0248)",
      "additionalProperties": false,
      "binaryOrder": [
        "recordHandle",
        "PDRHeaderVersion",
        "PDRType",
        "recordChangeNumber",
        "dataLength"
      ],
      "properties": {
        "recordHandle": {
          "oneOf": [
            { "type": "string", "enum": ["auto"] },
            { "type": "integer", "minimum": 0, "maximum": 4294967295 }
          ],
          "binaryFormat": "I",
          "description": "uint32; PDR Record Handle. 0 = auto-assign."
        },
        "PDRHeaderVersion": {
          "type": "integer",
          "const": 1,
          "binaryFormat": "B",
          "description": "uint8; PDR Header Version (1)"
        },
        "PDRType": {
          "type": "integer",
          "const": 20,
          "binaryFormat": "B",
          "description": "uint8; PDR Type 20 = FRU Record Set"
        },
        "recordChangeNumber": {
          "type": "integer",
          "default": 0,
          "binaryFormat": "H",
          "description": "uint16; recordChangeNumber"
        },
        "dataLength": {
          "oneOf": [
            { "type": "string", "enum": ["auto"] },
            { "type": "integer", "minimum": 0 }
          ],
          "binaryFormat": "H",
          "description": "uint16; Length of data following this header (calculated automatically)."
        }
      },
      "required": ["recordHandle", "PDRHeaderVersion", "PDRType", "recordChangeNumber", "dataLength"]
    },
    "pldmTerminusHandle": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "binaryFormat": "H",
      "description": "uint16; The terminus that originated or maintains this PDR."
    },
    "fruRecordSetIdentifier": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "binaryFormat": "H",
      "description": "uint16; A unique number per terminus that is used to identify the Record Set for the FRU Data for the associated entity. The Record Set value is used for accessing FRU Data using the commands specified in DSP0257."
    },
    "entityType": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "binaryFormat": "H",
      "description": "uint16; The Type value for the entity that is associated with this FRU data."
    },
    "entityInstanceNumber": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "binaryFormat": "H",
      "description": "uint16; The Instance Number for the entity that is associated with this FRU data."
    },
    "containerId": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "binaryFormat": "H",
      "description": "uint16; The containerID for the containing entity that is associated with this FRU data."
    }
  },
  "required": [
    "pdrHeader",
    "pldmTerminusHandle",
    "fruRecordSetIdentifier",
    "entityType",
    "entityInstanceNumber",
    "containerId"
  ]
}
