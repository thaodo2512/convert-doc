{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Numeric Effecter Initialization PDR (DSP0248 Type 10)",
  "description": "Per DSP0248 v1.3.0 Clause 28.12 and DSP0240 v1.2.0 Section 2.5",
  "type": "object",
  "additionalProperties": false,
  "binaryOrder": [
    "pdrHeader",
    "PLDMTerminusHandle",
    "effecterID",
    "initValue"
  ],
  "x-c-struct-packing": 1,
  "properties": {
    "pdrHeader": {
      "type": "object",
      "description": "Common PDR Header (DSP0248)",
      "additionalProperties": false,
      "binaryOrder": [
        "recordHandle",
        "PDRHeaderVersion",
        "PDRType",
        "recordChangeNumber",
        "dataLength"
      ],
      "properties": {
        "recordHandle": {
          "oneOf": [
            { "type": "string", "enum": ["auto"] },
            { "type": "integer", "minimum": 0, "maximum": 4294967295 }
          ],
          "binaryFormat": "I",
          "description": "uint32; PDR Record Handle. 0 = auto-assign."
        },
        "PDRHeaderVersion": {
          "type": "integer",
          "const": 1,
          "binaryFormat": "B",
          "description": "uint8; PDR Header Version (1)"
        },
        "PDRType": {
          "type": "integer",
          "const": 10,
          "binaryFormat": "B",
          "description": "uint8; PDR Type 10 = Numeric Effecter Initialization"
        },
        "recordChangeNumber": {
          "type": "integer",
          "default": 0,
          "binaryFormat": "H",
          "description": "uint16; recordChangeNumber"
        },
        "dataLength": {
          "oneOf": [
            { "type": "string", "enum": ["auto"] },
            { "type": "integer", "minimum": 0 }
          ],
          "binaryFormat": "H",
          "description": "uint16; Length of data following this header (calculated automatically)."
        }
      },
      "required": ["recordHandle", "PDRHeaderVersion", "PDRType", "recordChangeNumber", "dataLength"]
    },
    "PLDMTerminusHandle": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "binaryFormat": "H",
      "description": "uint16; Terminus Handle"
    },
    "effecterID": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "binaryFormat": "H",
      "description": "uint16; Effecter ID of the effecter this initialization belongs to."
    },
    "effecterDataSize": {
      "type": "integer",
      "enum": [1, 2, 3, 4, 5, 6, 7, 8, 9],
      "x-binary-ignore": true,
      "description": "Effecter data size code (1=uint8, 2=sint8, 3=uint16, 4=sint16, 5=uint32, 6=sint32, 7=uint64, 8=sint64, 9=real32). Not in binary; for code gen and validation only. Must match effecterDataSize in associated Numeric Effecter PDR."
    },
    "initValue": {
      "description": "The initial value for the effecter. Type and binary format determined by 'effecterDataSize'."
    }
  },
  "allOf": [
    {
      "if": {
        "properties": { "effecterDataSize": { "const": 1 } }
      },
      "then": {
        "properties": { "initValue": { "type": "integer", "minimum": 0, "maximum": 255, "binaryFormat": "B" } }
      }
    },
    {
      "if": {
        "properties": { "effecterDataSize": { "const": 2 } }
      },
      "then": {
        "properties": { "initValue": { "type": "integer", "minimum": -128, "maximum": 127, "binaryFormat": "b" } }
      }
    },
    {
      "if": {
        "properties": { "effecterDataSize": { "const": 3 } }
      },
      "then": {
        "properties": { "initValue": { "type": "integer", "minimum": 0, "maximum": 65535, "binaryFormat": "H" } }
      }
    },
    {
      "if": {
        "properties": { "effecterDataSize": { "const": 4 } }
      },
      "then": {
        "properties": { "initValue": { "type": "integer", "minimum": -32768, "maximum": 32767, "binaryFormat": "h" } }
      }
    },
    {
      "if": {
        "properties": { "effecterDataSize": { "const": 5 } }
      },
      "then": {
        "properties": { "initValue": { "type": "integer", "minimum": 0, "maximum": 4294967295, "binaryFormat": "I" } }
      }
    },
    {
      "if": {
        "properties": { "effecterDataSize": { "const": 6 } }
      },
      "then": {
        "properties": { "initValue": { "type": "integer", "minimum": -2147483648, "maximum": 2147483647, "binaryFormat": "i" } }
      }
    },
    {
      "if": {
        "properties": { "effecterDataSize": { "const": 7 } }
      },
      "then": {
        "properties": { "initValue": { "type": "string", "pattern": "^[0-9]{1,20}$", "binaryFormat": "Q" } }
      }
    },
    {
      "if": {
        "properties": { "effecterDataSize": { "const": 8 } }
      },
      "then": {
        "properties": { "initValue": { "type": "string", "pattern": "^-?[0-9]{1,20}$", "binaryFormat": "q" } }
      }
    },
    {
      "if": {
        "properties": { "effecterDataSize": { "const": 9 } }
      },
      "then": {
        "properties": { "initValue": { "type": "number", "binaryFormat": "f" } }
      }
    }
  ],
  "required": [
    "pdrHeader",
    "PLDMTerminusHandle",
    "effecterID",
    "effecterDataSize",
    "initValue"
  ]
}
