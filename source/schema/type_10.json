{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Numeric Effecter Initialization PDR Schema (DSP0248 1.3.0, Clause 28.12)",
  "type": "object",
  "additionalProperties": false,
  "binaryOrder": [
    "PLDMTerminusHandle",
    "effecterID",
    "effecterEnable",
    "initConditions",
    "effecterDataSize",
    "effecterData"
  ],
  "properties": {
    "pdrHeader": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "recordHandle": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "integer",
              "minimum": 0,
              "maximum": 4294967295
            }
          ],
          "binaryFormat": "I",
          "description": "uint32; opaque handle (TBD or auto-generated)"
        },
        "PDRHeaderVersion": {
          "type": "integer",
          "const": 1,
          "binaryFormat": "B",
          "description": "uint8; must be 1"
        },
        "PDRType": {
          "type": "integer",
          "const": 10,
          "binaryFormat": "B",
          "description": "uint8; Numeric Effecter Initialization PDR = 10"
        },
        "recordChangeNumber": {
          "type": "integer",
          "minimum": 0,
          "maximum": 65535,
          "default": 0,
          "binaryFormat": "H",
          "description": "uint16; incremented on changes (default 0)"
        },
        "dataLength": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "integer",
              "minimum": 0,
              "maximum": 65535
            }
          ],
          "binaryFormat": "H",
          "description": "uint16; calculated data length (TBD)"
        }
      },
      "required": [
        "recordHandle",
        "PDRHeaderVersion",
        "PDRType",
        "recordChangeNumber",
        "dataLength"
      ]
    },
    "PLDMTerminusHandle": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "binaryFormat": "H",
      "description": "uint16; Handle identifying PDRs for a specific PLDM terminus"
    },
    "effecterID": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "binaryFormat": "H",
      "description": "uint16; ID of the effecter relative to the given PLDM Terminus ID"
    },
    "effecterEnable": {
      "type": "integer",
      "minimum": 0,
      "maximum": 255,
      "binaryFormat": "B",
      "description": "enum8; The operational state of the effecter after it has been initialized. This state is written to the effecter using the SetEffecterEnable command. Special value: 0xFF = do not issue a SetEffecterEnable command to set the Effecter Operational State"
    },
    "initConditions": {
      "type": "integer",
      "minimum": 0,
      "maximum": 255,
      "binaryFormat": "B",
      "description": "bitfield8; Identifies under which conditions the Initialization Agent must initialize or reinitialize this effecter. [7:5] – reserved, [4] – 1b = PLDM terminus returns to online condition, [3] – 1b = System warm resets, [2] – 1b = System hard resets, [1] – 1b = PLDM subsystem power up, [0] – 1b = Initialization Agent controller restart/update"
    },
    "effecterDataSize": {
      "type": "integer",
      "enum": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7
      ],
      "binaryFormat": "B",
      "description": "enum8: 0=uint8,1=sint8,2=uint16,3=sint16,4=uint32,5=sint32,6=uint64,7=sint64; The bit width of reading and threshold values that the effecter returns"
    },
    "effecterData": {
      "anyOf": [
        {
          "type": "integer",
          "minimum": 0,
          "maximum": 255
        },
        {
          "type": "integer",
          "minimum": -128,
          "maximum": 127
        },
        {
          "type": "integer",
          "minimum": 0,
          "maximum": 65535
        },
        {
          "type": "integer",
          "minimum": -32768,
          "maximum": 32767
        },
        {
          "type": "integer",
          "minimum": 0,
          "maximum": 4294967295
        },
        {
          "type": "integer",
          "minimum": -2147483648,
          "maximum": 2147483647
        },
        {
          "type": "integer",
          "minimum": 0,
          "maximum": 18446744073709552000
        },
        {
          "type": "integer",
          "minimum": -9223372036854776000,
          "maximum": 9223372036854776000
        }
      ],
      "binaryFormat": "variable",
      "typeResolver": {
        "dependsOn": "effecterDataSize",
        "mapping": {
          "0": "uint8",
          "1": "sint8",
          "2": "uint16",
          "3": "sint16",
          "4": "uint32",
          "5": "sint32",
          "6": "uint64",
          "7": "sint64"
        }
      },
      "formatResolver": {
        "dependsOn": "effecterDataSize",
        "mapping": {
          "0": "B",
          "1": "b",
          "2": "H",
          "3": "h",
          "4": "I",
          "5": "i",
          "6": "Q",
          "7": "q"
        }
      },
      "description": "Variable; The numeric value written to the effecter. The size of this field is determined by the value of the effecterDataSize field"
    }
  },
  "required": [
    "pdrHeader",
    "PLDMTerminusHandle",
    "effecterID",
    "effecterEnable",
    "initConditions",
    "effecterDataSize",
    "effecterData"
  ]
}
